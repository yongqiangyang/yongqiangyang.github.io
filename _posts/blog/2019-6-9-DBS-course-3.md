---
layout: post
title: 数据库系统-第三章：SQL语言
categories: 数据库系统
description: 数据库系统课程笔记
keywords: DBS，课程笔记
---
# 第三章：SQL语言

## 1 SQL 概述

+ SQL （Structured Query Language）：结构化查询语言，是关系数据库的标准语言
+ SQL的特点:
	1. 综合统一
	2. 高度非过程化
	3. 面向集合的操作方式
	4. 以同一种语法结构提供多种使用方式：独立使用、嵌入式使用（嵌入到高级语言，例如：C，C++，Java）
	5. 语言简洁，易学易用  

| SQL功能 | 动词|
| ------ | ------ |
| 数据查询 | SELECT |
| 数据定义 | CREATE，DROP，ALTER |
| 数据操纵 | INSERT，UPDATE，DELETE |
| 数据控制 | GRANT，REVOKE |

+ SQL的基本概念
	1. 基本表：
		+ 本身独立存在的表
		+ SQL中一个关系就对应一个基本表
		+ 一个（或多个）基本表对应一个存储文件
		+ 一个表可以带若干索引
	2. 存储文件
		+ 物理结构对用户是隐蔽的
	3. 视图
		+ 从一个或几个基本表导出的表
		+ 只存放数据的定义，而不存放视图对应的数据
		+ 视图是一个虚表
		+ 视图上还可以再定义视图

## 2 学生-课程数据库
+ 学生-课程模式 S-T：
	+ 学生表： 学生表：Student(Sno,Sname,Ssex,Sage,Sdept)
	+ 课程表： 课程表：Course(Cno,Cname,Cpno,Ccredit)
	+ 学生选课表： 学生选课表：SC(Sno,Cno,Grade)

## 3 数据定义
1. SQL的数据定义语句

<table>
	<tr>
		<th rowspan = "2">操作对象</th>
		<th colspan = "3">操作方式</th>
	</tr>
	<tr>
		<td>创建</td>
		<td>删除</td>
		<td>修改</td>
	</tr>
	<tr>
		<td>模式</td>
		<td>CREATE SCHEMA</td>
		<td>DROP SCHEMA</td>
		<td></td>
	</tr>
	<tr>
		<td>表</td>
		<td>CREATE TABLE</td>
		<td>DROP TABLE</td>
		<td>ALTER TABLE</td>
	</tr>
	<tr>
		<td>视图</td>
		<td>CREATE VIEW</td>
		<td>DROP VIEW</td>
		<td></td>
	</tr>
	<tr>
		<td>索引</td>
		<td>CREATE INDEX</td>
		<td>DROP INDEX</td>
		<td>ALTER INDEX</td>
	</tr>
</table>


2. 模式
	+ 现代关系数据库管理系统提供了一个层次化的数据库对象命名机制
		+ 一个关系数据库管理系统的实例（Instance）中可以建立中可以建立多个数据库
		+ 一个数据库中可以建立多个模式
		+ 一个模式下通常包括多个表、视图和索引等数据库对象
	+ 模式的定义与删除
3. 基本表的定义、删除与修改
4. 索引的建立与删除
5. 模式与表
	+ 每一个基本表都属于某一个模式
	+ 一个模式包含多个基本表
	+ 定义基本表所属模式
		1. 在表名中明显地给出模式名
		2. 在创建模式语句中同时创建表
		3. 设置所属的模式：系统根据 **搜索路径** 来确定该书香所属的模式
	6. 数据字典：关系数据库管理系统内部的一组系统表，它记录了数据库中的所有定义信息。
		+ 执行SQL的数据定义语句时，实际上就是在更新数据字典表中的相应信息。

## 4 数据查询

## 5 数据更新

## 6 空值的处理
+ 出现空值的三种情况：
	1. 该属性应该有一个值，但目前不知道它的具体值
	2. 该属性不应该有值
	3. 由于某种原因不便于填写
+ 空值的约束条件
	1. 有NOT NULL约束条件
	2. 有UNIQUE限制的属性
	3. 码属性

## 7 视图
+ 视图的特点
	1. 虚表，由一个或多个基本表导出的表
	2. 只存放定义，不存放数据
	3. 基表发生变化，视图中查询出的数据也发生变化
+ 定义视图中 **WITH CHECK OPTION** ：对视图进行UPDATE，INSERT和DELETE操作时要保证行满足视图定义中的谓词条件。
+ 查询视图的方法：视图消解法
	+ 进行有效性检查
	+ 转换成等价的对基本表的查询
	+ 执行修正后的查询
+ 更新视图的限制，即不允许更新
	1. 多个基本表导出
	2. 字段表达式
	3. 集函数
	4. 由GROUP BY子句
	5. 有DISTINCT短语
	6. 内层查询的FROM子句中涉的表也是导出该视图的基本表
+ 视图的作用
	1. 简化用户的操作
	2. 使用户能以多种角度看待同一数据
	3. 对重构数据库提供了一定程度的逻辑独立性
	4. 能够对机密数据提供安全保护
	5. 更清晰的表达查询
